(function(){const l=chrome.runtime.sendMessage,m=new Proxy(l,{apply:function(o,t,i){const[e,a]=i;return(e==null?void 0:e.code)==="item_list"?Reflect.apply(o,t,[e,(...n)=>{console.debug("[SW Intercept] 捕获到 item_list 响应",n[0]);const p=new Date().toLocaleDateString("zh-CN",{timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-"),d=n[0]||[],c=`zhixia_${p}`,y=JSON.parse(localStorage.getItem(c)||"[]")||[],g=new Map([...y,...d].map(r=>[r.itemId,{...r,timestamp:Date.now()}])),s=Array.from(g.values());return localStorage.setItem(c,JSON.stringify(s)),chrome.runtime.sendMessage({type:"STORAGE_UPDATE",payload:{key:"zhixiaDataLength",value:s.length}}),a==null?void 0:a.apply(t,n)}]):Reflect.apply(o,t,i)}});chrome.runtime.sendMessage=m})();
